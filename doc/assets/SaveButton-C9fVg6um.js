import{c as p,r as L,j as E,d as j}from"./index-BAiV4GWh.js";import{h as A}from"./html2canvas.esm-yKKpCwHi.js";import{a as O,S as D}from"./index-CxOm9ERl.js";import"./animates-HAWQhuyM.js";var m={exports:{}},_=m.exports,b;function B(){return b||(b=1,function(v,g){(function(d,l){l()})(_,function(){function d(e,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function l(e,t,s){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){o(n.response,t,s)},n.onerror=function(){},n.send()}function f(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof p=="object"&&p.global===p?p:void 0,c=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,t,s){var n=a.URL||a.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin===location.origin?r(i):f(i.href)?l(e,t,s):r(i,i.target="_blank")):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){r(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,s){if(t=t||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(d(e,s),t);else if(f(e))l(e,t,s);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){r(n)})}}:function(e,t,s,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return l(e,t,s);var i=e.type==="application/octet-stream",R=/constructor/i.test(a.HTMLElement)||a.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||i&&R||c)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var u=w.result;u=y?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},w.readAsDataURL(e)}else{var x=a.URL||a.webkitURL,h=x.createObjectURL(e);n?n.location=h:location.href=h,n=null,setTimeout(function(){x.revokeObjectURL(h)},4e4)}});a.saveAs=o.saveAs=o,v.exports=o})}(m)),m.exports}var U=B();const S=navigator.userAgent,F=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(S),T=S.toLowerCase().indexOf("micromessenger")>-1||F,M=j(D)`
  position: fixed;
  left: 0.5rem;
  bottom: 0.5rem;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  > svg {
    width: 28px;
    height: 28px;
  }
`;function P({visible:v}){const[g,d]=L.useState(!1),l=async()=>{T&&alert("请在浏览器打开！");let r=document.querySelector("#HONEYED_WORDS_CARD");await f(r)},f=async(r,a=!1)=>{d(!0),A(r,{debug:!1,onclone:c=>{let o=c.querySelector("#HONEYED_WORDS_CARD");o.classList.add("starting"),o.style.transform="none",o.style.boxShadow="none"},scale:window.devicePixelRatio*(a?2:1)}).then(function(c){if(a){let o=document.createElement("img");c.toBlob(e=>{const{URL:{createObjectURL:t}}=window;o.src=t(e),o.classList.add("downloadImg")}),r.classList.add("img"),r.appendChild(o),d(!1)}else c.toBlob(o=>{U.saveAs(o,`hw-${new Date().getTime()}.png`),d(!1)},"image/png");r.classList.remove("starting")})};return E.jsx(M,{className:v?"visible":"hidden",disabled:g,onClick:l,children:E.jsx(O,{})})}export{P as default};
